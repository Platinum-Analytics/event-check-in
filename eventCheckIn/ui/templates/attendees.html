{% extends "base.html" %}
{% block content %}
    <div class="flex main">
        <div class="flex holder">
            <div class="flex-section">
                <button class="w3-button w3-light-gray">
                    Home
                </button>
            </div>

            <div class="flex-section">
                <h1>All Attendees</h1>
            </div>

            <div class="flex-section">
                <button class="w3-button w3-gray" id="all-guests">
                    Collapse All
                </button>
            </div>

        </div>
        <div class="flex tblHolder">
            <table>
                <thead class="tblGroup">
                <tr class>
                    <th>Ticket #</th>
                    <th>School ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th></th>
                </tr>
                </thead>

                {% for i in students %}

                    <tbody class="tblGroup">
                    <tr>
                        <td>{{ i.ticket_num }}</td>
                        <td>{{ i.school_id }}</td>
                        <td>{{ i.first_name }}</td>
                        <td>{{ i.last_name }}</td>

                        {% if i.guests %}

                            <td class="showGuest">
                                <button title="Hide Guests" class="w3-button expand-guest" parent_id={{ i.school_id }}>
                                    <i class="fa-solid fa-chevron-up"></i>
                                </button>
                            </td>

                        {% else %}

                            <td></td>


                        {% endif %}

                    </tr>

                    {% if i.guests %}

                        {% for j in i.guests %}

                            <tr class="guestRow" parent_id={{ i.school_id }}>
                                <td>{{ j.ticket_num }}</td>
                                <td></td>
                                <td>{{ j.first_name }}</td>
                                <td>{{ j.last_name }}</td>
                                <td></td>
                            </tr>

                        {% endfor %}

                    {% endif %}

                    </tbody>

                {% endfor %}

            </table>
        </div>
    </div>

{% endblock %}
